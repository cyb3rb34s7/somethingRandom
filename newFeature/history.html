<!-- metadata-history.component.html -->
<div class="history-container">
  <div *ngFor="let change of processedChanges" class="history-item">
    <div class="history-field">
      {{ change.field }}
    </div>
    <div class="history-values">
      <div class="history-value-section">
        <div class="value-label">Old Value</div>
        <ng-container *ngIf="isComplexValue(change.oldVal); else stringValue">
          <div [innerHTML]="formatValue(change.oldVal)"></div>
        </ng-container>
        <ng-template #stringValue>
          <div class="simple-value">{{ formatValue(change.oldVal) }}</div>
        </ng-template>
      </div>
      <div class="history-value-section">
        <div class="value-label">New Value</div>
        <ng-container *ngIf="isComplexValue(change.newVal); else stringNewValue">
          <div [innerHTML]="formatValue(change.newVal)"></div>
        </ng-container>
        <ng-template #stringNewValue>
          <div class="simple-value">{{ formatValue(change.newVal) }}</div>
        </ng-template>
      </div>
    </div>
  </div>
</div>